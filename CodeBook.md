# Code Book

## Data Source
This R script is using data collected from the accelerometers from the Samsung Galaxy S smartphone. 
A full description is available at the site where the data was obtained:
http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones 

The data for the project can be downloaded from:
https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip 

Data are stored in Train/Test folder respectively. Each Train/Test data consists of files:

1. Raw Data Set

No. |file name                       | Description
----|--------------------------------|------------------------------------------------------------------------------------
1   |subject_train.txt               | Each row identifies the subject who performed the activity for each window sample. Its range is from 1 to 30.
2   |y_train.txt or y_test.txt       | the labels of data set for train/test. Each represent the activity performed by subject which map to identical row of measurement in X_Train.txt/X_Tests.txt.
3   |X_train.txt or X_test.txt       | the recorded data set for train/test. Consists of 561 measurements collected.

2. Descriptive Data

No. |file name                       | Description
----|--------------------------------|------------------------------------------------------------------------------------
1   |features.txt                    | List of all features. Represent the descriptive label for 561 variables collected in X_train.txt/X_test.txt.
2   |activity_labels.txt             | Links the labels of data set with their activity name. Represent six activities performed by subject (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, LAYING)

## Data Transformation
### Step 1: Data Merging
First, rows in train subject (7332 observations) and test data (2947) were concatenated. Next, rows in train data (7352 observations) and test data (2947) were concatenated.
Then, data labels that represent the activity and subject were merge into the data set. Table below depicts the merging outcomes:

subject_train.txt | y_train.txt or y_test.txt |X_train.txt or X_test.txt|Merged Dataset (outcome from merging)
------------------|---------------------------|-------------------------|-----------------------------------------
subject (int)     |                           |                         |subject (int)
                  |activity (int)             |                         |activity (int)
                  |                           |V1 (num)                 |V1 (num)
                  |                           |V2 (num)                 |V2 (num)
                  |                           |V3 (num)                 |V3 (num)
                  |                           |...                      |...  
                  |                           |...                      |...  
                  |                           |...                      |...
                  |                           |V559 (num)               |V559 (num)
                  |                           |V560 (num)               |V560 (num)
                  |                           |V561 (num)               |V561 (num)

### Step 2: Extract only measurements on mean and standard deviation for each measurement
Extract only variables with "mean()" and "std()" from the Merged Dataset based on the data labels descriptive name from features.txt. Only 66 variables were presented.

Merged Dataset (outcome from step 1)  | Updated Dataset (outcome from data cleansing)
--------------------------------------|-------------------------------------------------
subject (int)                         |subject (int)
activity (int)                        |activity (int)
V1 (num)                              |tBodyAcc-mean()-X (num)
V2 (num)                              |tBodyAcc-mean()-Y (num)
V3 (num)                              |tBodyAcc-mean()-Z (num)
...                                   |...  
V10 (num)                             |...  
...                                   |...
V530 (num)                            |fBodyBodyGyroMag-std() (num)
V542 (num)                            |fBodyBodyGyroJerkMag-mean() (num)
V543 (num)                            |fBodyBodyGyroJerkMag-std() (num)
...                                   |...
V561 (num)                            |...


### Step 3: 
Represent the activity with it's descriptive activity names from activity_labels.txt.

Merged Dataset (outcome from step 2)  | Updated Dataset (outcome from data cleansing)
--------------------------------------|-------------------------------------------------
subject (int)                         |subject (int)
activity (int)                        |activity (factor w/ 6 levels)
tBodyAcc-mean()-X (num)               |tBodyAcc-mean()-X (num)
tBodyAcc-mean()-Y (num)               |tBodyAcc-mean()-Y (num)
tBodyAcc-mean()-Z (num)               |tBodyAcc-mean()-Z (num)
...                                   |...  
...                                   |...  
...                                   |...
fBodyBodyGyroMag-std() (num)          |fBodyBodyGyroMag-std() (num)
fBodyBodyGyroJerkMag-mean() (num)     |fBodyBodyGyroJerkMag-mean() (num)
fBodyBodyGyroJerkMag-std() (num)      |fBodyBodyGyroJerkMag-std() (num)

### Step 4:
Clean the labels with more descriptive name.

Merged Dataset (outcome from step 3)  | Updated Dataset (outcome from data cleansing)
--------------------------------------|-------------------------------------------------
subject (int)                         |subject (factor w/ 30 levels)
activity (factor w/ 6 levels)         |activity (factor w/ 6 levels)
tBodyAcc-mean()-X (num)               |timeBodyAcMean_X (num)
tBodyAcc-mean()-Y (num)               |timeBodyAccMean_Y (num)
tBodyAcc-mean()-Z (num)               |timeBodyAccMean_Z (num)
...                                   |...  
...                                   |...  
...                                   |...
fBodyBodyGyroMag-std() (num)          |freqBodyBodyGyroMagStd (num)
fBodyBodyGyroJerkMag-mean() (num)     |freqBodyBodyGyroJerkMagMean (num)
fBodyBodyGyroJerkMag-std() (num)      |freqBodyBodyGyroJerkMagStd (num)

### Step 5
Produce a tidy data set with average of each variable for each activity and each subject. 

## Tidy Data set
The resulting tidy data set has 68 columns.

No.|column                   |Type                 |Sample Data
---|-------------------------|---------------------|-----------------------------------------------------------------------
  1| subject                 | Factor w/ 30 levels |"1","2","3","4",..: 1 1 1 1 1 1 2 2 2 2 ...
  2| activity                | Factor w/ 6 levels  |"WALKING","WALKING_UPSTAIRS",..: 1 2 3 4 5 6 1 2 3 4 ...
  3| timeBodyAccMean_X       | num                 |0.277 0.255 0.289 0.261 0.279 ...
  4| timeBodyAccMean_Y       | num                 |-0.01738 -0.02395 -0.00992 -0.00131 -0.01614 ...
  5| timeBodyAccMean_Z       | num                 |-0.1111 -0.0973 -0.1076 -0.1045 -0.1106 ...
  6| timeBodyAccStd_X        | num                 |-0.284 -0.355 0.03 -0.977 -0.996 ...
  7| timeBodyAccStd_Y        | num                 |0.11446 -0.00232 -0.03194 -0.92262 -0.97319 ...
  8| timeBodyAccStd_Z        | num                 |-0.26 -0.0195 -0.2304 -0.9396 -0.9798 ...
  9| timeGravityAccMean_X    | num                 |0.935 0.893 0.932 0.832 0.943 ...
 10| timeGravityAccMean_Y    | num                 |-0.282 -0.362 -0.267 0.204 -0.273 ...
 11| timeGravityAccMean_Z    | num                 |-0.0681 -0.0754 -0.0621 0.332 0.0135 ...
 12| timeGravityAccStd_X     | num                 |-0.977 -0.956 -0.951 -0.968 -0.994 ...
 13| timeGravityAccStd_Y     | num                 |-0.971 -0.953 -0.937 -0.936 -0.981 ...
 14| timeGravityAccStd_Z     | num                 |-0.948 -0.912 -0.896 -0.949 -0.976 ...
 15| timeBodyAccJerkMean_X   | num                 |0.074 0.1014 0.0542 0.0775 0.0754 ...
 16| timeBodyAccJerkMean_Y   | num                 |0.028272 0.019486 0.02965 -0.000619 0.007976 ...
 17| timeBodyAccJerkMean_Z   | num                 |-0.00417 -0.04556 -0.01097 -0.00337 -0.00369 ...
 18| timeBodyAccJerkStd_X    | num                 |-0.1136 -0.4468 -0.0123 -0.9864 -0.9946 ...
 19| timeBodyAccJerkStd_Y    | num                 |0.067 -0.378 -0.102 -0.981 -0.986 ...
 20| timeBodyAccJerkStd_Z    | num                 |-0.503 -0.707 -0.346 -0.988 -0.992 ...
 21| timeBodyGyroMean_X      | num                 |-0.0418 0.0505 -0.0351 -0.0454 -0.024 ...
 22| timeBodyGyroMean_Y      | num                 |-0.0695 -0.1662 -0.0909 -0.0919 -0.0594 ...
 23| timeBodyGyroMean_Z      | num                 |0.0849 0.0584 0.0901 0.0629 0.0748 ...
 24| timeBodyGyroStd_X       | num                 |-0.474 -0.545 -0.458 -0.977 -0.987 ...
 25| timeBodyGyroStd_Y       | num                 |-0.05461 0.00411 -0.12635 -0.96647 -0.98773 ...
 26| timeBodyGyroStd_Z       | num                 |-0.344 -0.507 -0.125 -0.941 -0.981 ...
 27| timeBodyGyroJerkMean_X  | num                 |-0.09 -0.1222 -0.074 -0.0937 -0.0996 ...
 28| timeBodyGyroJerkMean_Y  | num                 |-0.0398 -0.0421 -0.044 -0.0402 -0.0441 ...
 29| timeBodyGyroJerkMean_Z  | num                 |-0.0461 -0.0407 -0.027 -0.0467 -0.049 ...
 30| timeBodyGyroJerkStd_X   | num                 |-0.207 -0.615 -0.487 -0.992 -0.993 ...
 31| timeBodyGyroJerkStd_Y   | num                 |-0.304 -0.602 -0.239 -0.99 -0.995 ...
 32| timeBodyGyroJerkStd_Z   | num                 |-0.404 -0.606 -0.269 -0.988 -0.992 ...
 33| timeBodyAccMagMean      | num                 |-0.137 -0.1299 0.0272 -0.9485 -0.9843 ...
 34| timeBodyAccMagStd       | num                 |-0.2197 -0.325 0.0199 -0.9271 -0.9819 ...
 35| timeGravityAccMagMean   | num                 |-0.137 -0.1299 0.0272 -0.9485 -0.9843 ...
 36| timeGravityAccMagStd    | num                 |-0.2197 -0.325 0.0199 -0.9271 -0.9819 ...
 37| timeBodyAccJerkMagMean  | num                 |-0.1414 -0.4665 -0.0894 -0.9874 -0.9924 ...
 38| timeBodyAccJerkMagStd   | num                 |-0.0745 -0.479 -0.0258 -0.9841 -0.9931 ...
 39 timeBodyGyroMagMean      | num                 |-0.161 -0.1267 -0.0757 -0.9309 -0.9765 ...
 40| timeBodyGyroMagStd      | num                 |-0.187 -0.149 -0.226 -0.935 -0.979 ...
 41| timeBodyGyroJerkMagMean | num                 |-0.299 -0.595 -0.295 -0.992 -0.995 ...
 42| timeBodyGyroJerkMagStd  | num                 |-0.325 -0.649 -0.307 -0.988 -0.995 ...
 43| freqBodyAccMean_X       | num                 |-0.2028 -0.4043 0.0382 -0.9796 -0.9952 ...
 44| freqBodyAccMean_Y       | num                 |0.08971 -0.19098 0.00155 -0.94408 -0.97707 ...
 45| freqBodyAccMean_Z       | num                 |-0.332 -0.433 -0.226 -0.959 -0.985 ...
 46| freqBodyAccStd_X        | num                 |-0.3191 -0.3374 0.0243 -0.9764 -0.996 ...
 47| freqBodyAccStd_Y        | num                 |0.056 0.0218 -0.113 -0.9173 -0.9723 ...
 48| freqBodyAccStd_Z        | num                 |-0.28 0.086 -0.298 -0.934 -0.978 ...
 49| freqBodyAccJerkMean_X   | num                 |-0.1705 -0.4799 -0.0277 -0.9866 -0.9946 ...
 50| freqBodyAccJerkMean_Y   | num                 |-0.0352 -0.4134 -0.1287 -0.9816 -0.9854 ...
 51| freqBodyAccJerkMean_Z   | num                 |-0.469 -0.685 -0.288 -0.986 -0.991 ...
 52| freqBodyAccJerkStd_X    | num                 |-0.1336 -0.4619 -0.0863 -0.9875 -0.9951 ...
 53| freqBodyAccJerkStd_Y    | num                 |0.107 -0.382 -0.135 -0.983 -0.987 ...
 54| freqBodyAccJerkStd_Z    | num                 |-0.535 -0.726 -0.402 -0.988 -0.992 ...
 55| freqBodyGyroMean_X      | num                 |-0.339 -0.493 -0.352 -0.976 -0.986 ...
 56| freqBodyGyroMean_Y      | num                 |-0.1031 -0.3195 -0.0557 -0.9758 -0.989 ...
 57| freqBodyGyroMean_Z      | num                 |-0.2559 -0.4536 -0.0319 -0.9513 -0.9808 ...
 58| freqBodyGyroStd_X       | num                 |-0.517 -0.566 -0.495 -0.978 -0.987 ...
 59| freqBodyGyroStd_Y       | num                 |-0.0335 0.1515 -0.1814 -0.9623 -0.9871 ...
 60| freqBodyGyroStd_Z       | num                 |-0.437 -0.572 -0.238 -0.944 -0.982 ...
 61| freqBodyAccMagMean      | num                 |-0.1286 -0.3524 0.0966 -0.9478 -0.9854 ...
 62| freqBodyAccMagStd       | num                 |-0.398 -0.416 -0.187 -0.928 -0.982 ...
 63| freqBodyAccJerkMagMean  | num                 |-0.0571 -0.4427 0.0262 -0.9853 -0.9925 ...
 64| freqBodyAccJerkMagStd   | num                 |-0.103 -0.533 -0.104 -0.982 -0.993 ...
 65| freqBodyGyroMagMean     | num                 |-0.199 -0.326 -0.186 -0.958 -0.985 ...
 66| freqBodyGyroMagStd      | num                 |-0.321 -0.183 -0.398 -0.932 -0.978 ...
 67| freqBodyGyroJerkMagMean | num                 |-0.319 -0.635 -0.282 -0.99 -0.995 ...
 68| freqBodyGyroJerkMagStd  | num                 |-0.382 -0.694 -0.392 -0.987 -0.995 ...

## Result
The final result, store in dataframe activitySubjectAvg grouped by subject and activity, was written to the file "tidyAverageData.txt".
The output file contains the computed average of each measurement (column 3 to 68) for each unique combination of subject and activity (column 1 and 2).
